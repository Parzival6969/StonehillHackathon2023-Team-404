#include <SoftwareSerial.h>
#define SmokePIN A0
 int LDRSensor = 2;
float sensorValue;
SoftwareSerial mySerial(9,10);

void setup() {
  Serial.begin(9600);
  pinMode (LDRSensor, INPUT);
 }

  
void loop() {
 sensorValue = analogRead(SmokePIN);
 Serial.print("Smoke sensor: ");
 Serial.println(sensorValue);
 delay(500);
 if (sensorValue>=140){
  SendMessage1(); 
  }
 
 int Sensordata = digitalRead (LDRSensor);
 Serial.print("Sensor value:");
 Serial.println(Sensordata);
 delay(500);
 if (Sensordata==0) {
 Serial.println("Good light intensity");
 }
if(Sensordata==1){
  Serial.println("Low light intensity");
  SendMessage(); 
}
}

void SendMessage()
{
  mySerial.println("AT+CMGF=1");    //Sets the GSM Module in Text Mode
  delay(1000);  // Delay of 1000 milli seconds or 1 second

  mySerial.println("AT+CMGS=\"+919008415003\"\r"); // Replace x with mobile number
  delay(1000);

  mySerial.println("The light intensity is not appropriate for your crops");// The SMS text you want to send
  delay(100);
   mySerial.println((char)26);// ASCII code of CTRL+Z
  delay(1000);
}

void SendMessage1()
{
  mySerial.println("AT+CMGF=1");    //Sets the GSM Module in Text Mode
  delay(1000);  // Delay of 1000 milli seconds or 1 second

  mySerial.println("AT+CMGS=\"+919008415003\"\r"); // Replace x with mobile number
  delay(1000);

  mySerial.println("The air is polluted");// The SMS text you want to send
  delay(100);
   mySerial.println((char)26);// ASCII code of CTRL+Z
  delay(1000);
}
